clear all, close all, clc

InitializeParameters();

[A, B] = StateSpaceMatrices();

Q = [1, 0, 0, 0;
     0, 1, 0, 0;
     0, 0, 1, 0;
     0, 0, 0, 1];
R = 1;

[K, S, e] = lqr(A, B, Q, R);

% Target state vect
target = []

tspan = 0:0.1:10;
initialStates = [0; 0.1; pi; 0];
[t, y] = ode45(@(t, y) RobotODE(y, -K*y), tspan, initialStates);

for i = 1:length(t)
   drawRobot(y(i,:), m, M, L);
end